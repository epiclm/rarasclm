<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorator="layout/rarasClmLayout">
<head>
<script type="text/javascript" th:inline="javascript">
	/*<![CDATA[*/
var routeBase  = /*[[${route.baseUrl}]]*/'';
var contextApp = /*[[${baseModel.baseApp}]]*/'';
var enfermedades;
var enfermedadesLiterales;

function renderBotonesPaciente(num,deno) {
	var strShow = "<a class='btn btn-primary' style='margin-right:5px' href='"+routeBase+"show/"+num+"'>Ver</a>";
	var strEdit = "<a class='btn btn-success' style='margin-right:5px' href='"+routeBase+"edit/"+num+"'>Editar</a>";
	return "<p style='display:inline-block;margin-right:10px;font-weight:bold'>"+deno+"</p>"+strEdit;
}

$(document)
.ready(function() {	
	
		$("#form-search-paciente").on('submit',function(e) {
		    	e.preventDefault();
		  });
		
		$("#img-espera-num-paciente").css('display','none');
		
	   $("#btnBusquedaNumeroPaciente").on('click',function() {
		   var val = $("#busquedaNumeroPaciente").val();
		   $("#resultado-busqueda-num-paciente").html("");
		   $("#img-espera-num-paciente").css('display','inline-block');
		   
		   $.ajax({
			  url: routeBase + "json/" + val,
			  dataType: 'json',
			  type: 'GET'
		   }).done(function(data,textStatus,jqXHR) {
			   var deno = data.apellido01.toUpperCase()+" "+data.apellido02.toUpperCase()+", "+data.nombre.toUpperCase();
			   $("#resultado-busqueda-num-paciente").html(renderBotonesPaciente(val,deno));
		   }).fail(function(jqXHR, textStatus, errorThrown) {
			   $("#resultado-busqueda-num-paciente").html("<p class='text-error'>No se encuentra</p>");
		   }).always(function(dataJq,errorOrJqXHR) {
			   $("#img-espera-num-paciente").css('display','none'); 
		   });	   
	   });
});
/*]]>*/
</script>
</head>
<body>
	<div id="contenido" layout:fragment="content">
		<!-- BUSQUEDAS -->
		<div class="row span11 offset1">
			<form id="form-search-paciente" class="form-horizontal" method='POST'>
				<div id="grupo-busqueda-numero-paciente" class="form-group row-fluid control-group">
					<label class="control-label span3" for="busquedaNumeroPaciente">Num. Paciente:</label>
					<div class="input-append" >
						<input id="busquedaNumeroPaciente" class="span6" name="busquedaNumeroPaciente" type="text" maxlength="7"/>
						<a id="btnBusquedaNumeroPaciente" class="btn add-on" href="#"><i class="icon-search"></i></a>
					</div>		
					<img id="img-espera-num-paciente" style="width:24px;margin-left:10px" alt="Esperando..." th:src="@{/img/espera.gif}"></img>	
					<div id="resultado-busqueda-num-paciente" style="display:inline-block"></div>
				</div>
			</form>
		</div>
	</div><!-- Fin Contenido -->
</body>
</html>